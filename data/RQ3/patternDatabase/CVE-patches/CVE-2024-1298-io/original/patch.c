#include <stdio.h>
#include <time.h>
#include <stdint.h>

int main(int argc, char **argv) {
  uint_64_t S3ResumeTotal, FullResume, CurrentTime;
  uint_32_t ResumeCount, AverageResume;
  FILE *fp;
  fp = fopen("edk2.c", "r");
  // simplified source 
  fscanf(fp, "%d", &AverageResume);
  fscanf(fp, "%d", &ResumeCount);

  CurrentTime = time(0);

  FullResume = CurrentTime;
  S3ResumeTotal = AverageResume * ResumeCount;
  // patch
  if (ResumeCount == 0xFFFFFFFF) {
    printf("ResumeCount is at maximum value\n");
    return 0;
  }

  ResumeCount++;
  // sink
  AverageResume = (S3ResumeTotal + FullResume) / ResumeCount;
  return 0;
}